
---
# Code generated by Sloth (v0.15.0): https://github.com/slok/sloth.
# DO NOT EDIT.

groups:
- name: sloth-slo-sli-recordings-cicd-pipeline-deployment-availability
  rules:
  - record: slo:sli_error:ratio_rate5m
    expr: |-
      (sum(rate(cicd_deployment_status{status="0"}[5m]))
      /
      sum(rate(cicd_deployment_status[5m]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-deployment-availability
      sloth_service: cicd-pipeline
      sloth_slo: deployment-availability
      sloth_window: 5m
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate30m
    expr: |-
      (sum(rate(cicd_deployment_status{status="0"}[30m]))
      /
      sum(rate(cicd_deployment_status[30m]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-deployment-availability
      sloth_service: cicd-pipeline
      sloth_slo: deployment-availability
      sloth_window: 30m
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate1h
    expr: |-
      (sum(rate(cicd_deployment_status{status="0"}[1h]))
      /
      sum(rate(cicd_deployment_status[1h]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-deployment-availability
      sloth_service: cicd-pipeline
      sloth_slo: deployment-availability
      sloth_window: 1h
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate2h
    expr: |-
      (sum(rate(cicd_deployment_status{status="0"}[2h]))
      /
      sum(rate(cicd_deployment_status[2h]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-deployment-availability
      sloth_service: cicd-pipeline
      sloth_slo: deployment-availability
      sloth_window: 2h
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate6h
    expr: |-
      (sum(rate(cicd_deployment_status{status="0"}[6h]))
      /
      sum(rate(cicd_deployment_status[6h]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-deployment-availability
      sloth_service: cicd-pipeline
      sloth_slo: deployment-availability
      sloth_window: 6h
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate1d
    expr: |-
      (sum(rate(cicd_deployment_status{status="0"}[1d]))
      /
      sum(rate(cicd_deployment_status[1d]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-deployment-availability
      sloth_service: cicd-pipeline
      sloth_slo: deployment-availability
      sloth_window: 1d
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate3d
    expr: |-
      (sum(rate(cicd_deployment_status{status="0"}[3d]))
      /
      sum(rate(cicd_deployment_status[3d]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-deployment-availability
      sloth_service: cicd-pipeline
      sloth_slo: deployment-availability
      sloth_window: 3d
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate30d
    expr: |
      sum_over_time(slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-deployment-availability", sloth_service="cicd-pipeline", sloth_slo="deployment-availability"}[30d])
      / ignoring (sloth_window)
      count_over_time(slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-deployment-availability", sloth_service="cicd-pipeline", sloth_slo="deployment-availability"}[30d])
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-deployment-availability
      sloth_service: cicd-pipeline
      sloth_slo: deployment-availability
      sloth_window: 30d
      team: devops
      tier: platform
- name: sloth-slo-meta-recordings-cicd-pipeline-deployment-availability
  rules:
  - record: slo:objective:ratio
    expr: vector(0.9990000000000001)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-deployment-availability
      sloth_service: cicd-pipeline
      sloth_slo: deployment-availability
      team: devops
      tier: platform
  - record: slo:error_budget:ratio
    expr: vector(1-0.9990000000000001)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-deployment-availability
      sloth_service: cicd-pipeline
      sloth_slo: deployment-availability
      team: devops
      tier: platform
  - record: slo:time_period:days
    expr: vector(30)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-deployment-availability
      sloth_service: cicd-pipeline
      sloth_slo: deployment-availability
      team: devops
      tier: platform
  - record: slo:current_burn_rate:ratio
    expr: |
      slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-deployment-availability", sloth_service="cicd-pipeline", sloth_slo="deployment-availability"}
      / on(sloth_id, sloth_slo, sloth_service) group_left
      slo:error_budget:ratio{sloth_id="cicd-pipeline-deployment-availability", sloth_service="cicd-pipeline", sloth_slo="deployment-availability"}
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-deployment-availability
      sloth_service: cicd-pipeline
      sloth_slo: deployment-availability
      team: devops
      tier: platform
  - record: slo:period_burn_rate:ratio
    expr: |
      slo:sli_error:ratio_rate30d{sloth_id="cicd-pipeline-deployment-availability", sloth_service="cicd-pipeline", sloth_slo="deployment-availability"}
      / on(sloth_id, sloth_slo, sloth_service) group_left
      slo:error_budget:ratio{sloth_id="cicd-pipeline-deployment-availability", sloth_service="cicd-pipeline", sloth_slo="deployment-availability"}
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-deployment-availability
      sloth_service: cicd-pipeline
      sloth_slo: deployment-availability
      team: devops
      tier: platform
  - record: slo:period_error_budget_remaining:ratio
    expr: 1 - slo:period_burn_rate:ratio{sloth_id="cicd-pipeline-deployment-availability",
      sloth_service="cicd-pipeline", sloth_slo="deployment-availability"}
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-deployment-availability
      sloth_service: cicd-pipeline
      sloth_slo: deployment-availability
      team: devops
      tier: platform
  - record: sloth_slo_info
    expr: vector(1)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-deployment-availability
      sloth_mode: cli-gen-prom
      sloth_objective: "99.9"
      sloth_service: cicd-pipeline
      sloth_slo: deployment-availability
      sloth_spec: prometheus/v1
      sloth_version: v0.15.0
      team: devops
      tier: platform
- name: sloth-slo-alerts-cicd-pipeline-deployment-availability
  rules:
  - alert: DeploymentAvailability
    expr: |
      (
          max(slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-deployment-availability", sloth_service="cicd-pipeline", sloth_slo="deployment-availability"} > (14.4 * 0.0009999999999999432)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate1h{sloth_id="cicd-pipeline-deployment-availability", sloth_service="cicd-pipeline", sloth_slo="deployment-availability"} > (14.4 * 0.0009999999999999432)) without (sloth_window)
      )
      or
      (
          max(slo:sli_error:ratio_rate30m{sloth_id="cicd-pipeline-deployment-availability", sloth_service="cicd-pipeline", sloth_slo="deployment-availability"} > (6 * 0.0009999999999999432)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate6h{sloth_id="cicd-pipeline-deployment-availability", sloth_service="cicd-pipeline", sloth_slo="deployment-availability"} > (6 * 0.0009999999999999432)) without (sloth_window)
      )
    labels:
      severity: critical
      sloth_severity: page
    annotations:
      summary: '{{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget burn
        rate is over expected.'
      title: (page) {{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget
        burn rate is too fast.
  - alert: DeploymentAvailability
    expr: |
      (
          max(slo:sli_error:ratio_rate2h{sloth_id="cicd-pipeline-deployment-availability", sloth_service="cicd-pipeline", sloth_slo="deployment-availability"} > (3 * 0.0009999999999999432)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate1d{sloth_id="cicd-pipeline-deployment-availability", sloth_service="cicd-pipeline", sloth_slo="deployment-availability"} > (3 * 0.0009999999999999432)) without (sloth_window)
      )
      or
      (
          max(slo:sli_error:ratio_rate6h{sloth_id="cicd-pipeline-deployment-availability", sloth_service="cicd-pipeline", sloth_slo="deployment-availability"} > (1 * 0.0009999999999999432)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate3d{sloth_id="cicd-pipeline-deployment-availability", sloth_service="cicd-pipeline", sloth_slo="deployment-availability"} > (1 * 0.0009999999999999432)) without (sloth_window)
      )
    labels:
      severity: warning
      sloth_severity: ticket
    annotations:
      summary: '{{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget burn
        rate is over expected.'
      title: (ticket) {{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget
        burn rate is too fast.
- name: sloth-slo-sli-recordings-cicd-pipeline-build-availability
  rules:
  - record: slo:sli_error:ratio_rate5m
    expr: |-
      (sum(rate(cicd_build_status{status="0"}[5m]))
      /
      sum(rate(cicd_build_status[5m]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-availability
      sloth_service: cicd-pipeline
      sloth_slo: build-availability
      sloth_window: 5m
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate30m
    expr: |-
      (sum(rate(cicd_build_status{status="0"}[30m]))
      /
      sum(rate(cicd_build_status[30m]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-availability
      sloth_service: cicd-pipeline
      sloth_slo: build-availability
      sloth_window: 30m
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate1h
    expr: |-
      (sum(rate(cicd_build_status{status="0"}[1h]))
      /
      sum(rate(cicd_build_status[1h]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-availability
      sloth_service: cicd-pipeline
      sloth_slo: build-availability
      sloth_window: 1h
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate2h
    expr: |-
      (sum(rate(cicd_build_status{status="0"}[2h]))
      /
      sum(rate(cicd_build_status[2h]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-availability
      sloth_service: cicd-pipeline
      sloth_slo: build-availability
      sloth_window: 2h
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate6h
    expr: |-
      (sum(rate(cicd_build_status{status="0"}[6h]))
      /
      sum(rate(cicd_build_status[6h]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-availability
      sloth_service: cicd-pipeline
      sloth_slo: build-availability
      sloth_window: 6h
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate1d
    expr: |-
      (sum(rate(cicd_build_status{status="0"}[1d]))
      /
      sum(rate(cicd_build_status[1d]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-availability
      sloth_service: cicd-pipeline
      sloth_slo: build-availability
      sloth_window: 1d
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate3d
    expr: |-
      (sum(rate(cicd_build_status{status="0"}[3d]))
      /
      sum(rate(cicd_build_status[3d]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-availability
      sloth_service: cicd-pipeline
      sloth_slo: build-availability
      sloth_window: 3d
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate30d
    expr: |
      sum_over_time(slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-build-availability", sloth_service="cicd-pipeline", sloth_slo="build-availability"}[30d])
      / ignoring (sloth_window)
      count_over_time(slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-build-availability", sloth_service="cicd-pipeline", sloth_slo="build-availability"}[30d])
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-availability
      sloth_service: cicd-pipeline
      sloth_slo: build-availability
      sloth_window: 30d
      team: devops
      tier: platform
- name: sloth-slo-meta-recordings-cicd-pipeline-build-availability
  rules:
  - record: slo:objective:ratio
    expr: vector(0.995)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-availability
      sloth_service: cicd-pipeline
      sloth_slo: build-availability
      team: devops
      tier: platform
  - record: slo:error_budget:ratio
    expr: vector(1-0.995)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-availability
      sloth_service: cicd-pipeline
      sloth_slo: build-availability
      team: devops
      tier: platform
  - record: slo:time_period:days
    expr: vector(30)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-availability
      sloth_service: cicd-pipeline
      sloth_slo: build-availability
      team: devops
      tier: platform
  - record: slo:current_burn_rate:ratio
    expr: |
      slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-build-availability", sloth_service="cicd-pipeline", sloth_slo="build-availability"}
      / on(sloth_id, sloth_slo, sloth_service) group_left
      slo:error_budget:ratio{sloth_id="cicd-pipeline-build-availability", sloth_service="cicd-pipeline", sloth_slo="build-availability"}
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-availability
      sloth_service: cicd-pipeline
      sloth_slo: build-availability
      team: devops
      tier: platform
  - record: slo:period_burn_rate:ratio
    expr: |
      slo:sli_error:ratio_rate30d{sloth_id="cicd-pipeline-build-availability", sloth_service="cicd-pipeline", sloth_slo="build-availability"}
      / on(sloth_id, sloth_slo, sloth_service) group_left
      slo:error_budget:ratio{sloth_id="cicd-pipeline-build-availability", sloth_service="cicd-pipeline", sloth_slo="build-availability"}
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-availability
      sloth_service: cicd-pipeline
      sloth_slo: build-availability
      team: devops
      tier: platform
  - record: slo:period_error_budget_remaining:ratio
    expr: 1 - slo:period_burn_rate:ratio{sloth_id="cicd-pipeline-build-availability",
      sloth_service="cicd-pipeline", sloth_slo="build-availability"}
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-availability
      sloth_service: cicd-pipeline
      sloth_slo: build-availability
      team: devops
      tier: platform
  - record: sloth_slo_info
    expr: vector(1)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-availability
      sloth_mode: cli-gen-prom
      sloth_objective: "99.5"
      sloth_service: cicd-pipeline
      sloth_slo: build-availability
      sloth_spec: prometheus/v1
      sloth_version: v0.15.0
      team: devops
      tier: platform
- name: sloth-slo-alerts-cicd-pipeline-build-availability
  rules:
  - alert: BuildAvailability
    expr: |
      (
          max(slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-build-availability", sloth_service="cicd-pipeline", sloth_slo="build-availability"} > (14.4 * 0.005)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate1h{sloth_id="cicd-pipeline-build-availability", sloth_service="cicd-pipeline", sloth_slo="build-availability"} > (14.4 * 0.005)) without (sloth_window)
      )
      or
      (
          max(slo:sli_error:ratio_rate30m{sloth_id="cicd-pipeline-build-availability", sloth_service="cicd-pipeline", sloth_slo="build-availability"} > (6 * 0.005)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate6h{sloth_id="cicd-pipeline-build-availability", sloth_service="cicd-pipeline", sloth_slo="build-availability"} > (6 * 0.005)) without (sloth_window)
      )
    labels:
      severity: critical
      sloth_severity: page
    annotations:
      summary: '{{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget burn
        rate is over expected.'
      title: (page) {{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget
        burn rate is too fast.
  - alert: BuildAvailability
    expr: |
      (
          max(slo:sli_error:ratio_rate2h{sloth_id="cicd-pipeline-build-availability", sloth_service="cicd-pipeline", sloth_slo="build-availability"} > (3 * 0.005)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate1d{sloth_id="cicd-pipeline-build-availability", sloth_service="cicd-pipeline", sloth_slo="build-availability"} > (3 * 0.005)) without (sloth_window)
      )
      or
      (
          max(slo:sli_error:ratio_rate6h{sloth_id="cicd-pipeline-build-availability", sloth_service="cicd-pipeline", sloth_slo="build-availability"} > (1 * 0.005)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate3d{sloth_id="cicd-pipeline-build-availability", sloth_service="cicd-pipeline", sloth_slo="build-availability"} > (1 * 0.005)) without (sloth_window)
      )
    labels:
      sloth_severity: ticket
    annotations:
      summary: '{{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget burn
        rate is over expected.'
      title: (ticket) {{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget
        burn rate is too fast.
- name: sloth-slo-sli-recordings-cicd-pipeline-build-latency
  rules:
  - record: slo:sli_error:ratio_rate5m
    expr: |-
      ((
        sum(rate(cicd_build_duration_bucket{le="+Inf"}[5m]))
        -
        sum(rate(cicd_build_duration_bucket{le="300"}[5m]))
      )
      /
      sum(rate(cicd_build_duration_bucket{le="+Inf"}[5m]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-latency
      sloth_service: cicd-pipeline
      sloth_slo: build-latency
      sloth_window: 5m
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate30m
    expr: |-
      ((
        sum(rate(cicd_build_duration_bucket{le="+Inf"}[30m]))
        -
        sum(rate(cicd_build_duration_bucket{le="300"}[30m]))
      )
      /
      sum(rate(cicd_build_duration_bucket{le="+Inf"}[30m]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-latency
      sloth_service: cicd-pipeline
      sloth_slo: build-latency
      sloth_window: 30m
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate1h
    expr: |-
      ((
        sum(rate(cicd_build_duration_bucket{le="+Inf"}[1h]))
        -
        sum(rate(cicd_build_duration_bucket{le="300"}[1h]))
      )
      /
      sum(rate(cicd_build_duration_bucket{le="+Inf"}[1h]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-latency
      sloth_service: cicd-pipeline
      sloth_slo: build-latency
      sloth_window: 1h
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate2h
    expr: |-
      ((
        sum(rate(cicd_build_duration_bucket{le="+Inf"}[2h]))
        -
        sum(rate(cicd_build_duration_bucket{le="300"}[2h]))
      )
      /
      sum(rate(cicd_build_duration_bucket{le="+Inf"}[2h]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-latency
      sloth_service: cicd-pipeline
      sloth_slo: build-latency
      sloth_window: 2h
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate6h
    expr: |-
      ((
        sum(rate(cicd_build_duration_bucket{le="+Inf"}[6h]))
        -
        sum(rate(cicd_build_duration_bucket{le="300"}[6h]))
      )
      /
      sum(rate(cicd_build_duration_bucket{le="+Inf"}[6h]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-latency
      sloth_service: cicd-pipeline
      sloth_slo: build-latency
      sloth_window: 6h
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate1d
    expr: |-
      ((
        sum(rate(cicd_build_duration_bucket{le="+Inf"}[1d]))
        -
        sum(rate(cicd_build_duration_bucket{le="300"}[1d]))
      )
      /
      sum(rate(cicd_build_duration_bucket{le="+Inf"}[1d]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-latency
      sloth_service: cicd-pipeline
      sloth_slo: build-latency
      sloth_window: 1d
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate3d
    expr: |-
      ((
        sum(rate(cicd_build_duration_bucket{le="+Inf"}[3d]))
        -
        sum(rate(cicd_build_duration_bucket{le="300"}[3d]))
      )
      /
      sum(rate(cicd_build_duration_bucket{le="+Inf"}[3d]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-latency
      sloth_service: cicd-pipeline
      sloth_slo: build-latency
      sloth_window: 3d
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate30d
    expr: |
      sum_over_time(slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-build-latency", sloth_service="cicd-pipeline", sloth_slo="build-latency"}[30d])
      / ignoring (sloth_window)
      count_over_time(slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-build-latency", sloth_service="cicd-pipeline", sloth_slo="build-latency"}[30d])
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-latency
      sloth_service: cicd-pipeline
      sloth_slo: build-latency
      sloth_window: 30d
      team: devops
      tier: platform
- name: sloth-slo-meta-recordings-cicd-pipeline-build-latency
  rules:
  - record: slo:objective:ratio
    expr: vector(0.95)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-latency
      sloth_service: cicd-pipeline
      sloth_slo: build-latency
      team: devops
      tier: platform
  - record: slo:error_budget:ratio
    expr: vector(1-0.95)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-latency
      sloth_service: cicd-pipeline
      sloth_slo: build-latency
      team: devops
      tier: platform
  - record: slo:time_period:days
    expr: vector(30)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-latency
      sloth_service: cicd-pipeline
      sloth_slo: build-latency
      team: devops
      tier: platform
  - record: slo:current_burn_rate:ratio
    expr: |
      slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-build-latency", sloth_service="cicd-pipeline", sloth_slo="build-latency"}
      / on(sloth_id, sloth_slo, sloth_service) group_left
      slo:error_budget:ratio{sloth_id="cicd-pipeline-build-latency", sloth_service="cicd-pipeline", sloth_slo="build-latency"}
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-latency
      sloth_service: cicd-pipeline
      sloth_slo: build-latency
      team: devops
      tier: platform
  - record: slo:period_burn_rate:ratio
    expr: |
      slo:sli_error:ratio_rate30d{sloth_id="cicd-pipeline-build-latency", sloth_service="cicd-pipeline", sloth_slo="build-latency"}
      / on(sloth_id, sloth_slo, sloth_service) group_left
      slo:error_budget:ratio{sloth_id="cicd-pipeline-build-latency", sloth_service="cicd-pipeline", sloth_slo="build-latency"}
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-latency
      sloth_service: cicd-pipeline
      sloth_slo: build-latency
      team: devops
      tier: platform
  - record: slo:period_error_budget_remaining:ratio
    expr: 1 - slo:period_burn_rate:ratio{sloth_id="cicd-pipeline-build-latency", sloth_service="cicd-pipeline",
      sloth_slo="build-latency"}
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-latency
      sloth_service: cicd-pipeline
      sloth_slo: build-latency
      team: devops
      tier: platform
  - record: sloth_slo_info
    expr: vector(1)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-build-latency
      sloth_mode: cli-gen-prom
      sloth_objective: "95"
      sloth_service: cicd-pipeline
      sloth_slo: build-latency
      sloth_spec: prometheus/v1
      sloth_version: v0.15.0
      team: devops
      tier: platform
- name: sloth-slo-alerts-cicd-pipeline-build-latency
  rules:
  - alert: BuildLatency
    expr: |
      (
          max(slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-build-latency", sloth_service="cicd-pipeline", sloth_slo="build-latency"} > (14.4 * 0.05)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate1h{sloth_id="cicd-pipeline-build-latency", sloth_service="cicd-pipeline", sloth_slo="build-latency"} > (14.4 * 0.05)) without (sloth_window)
      )
      or
      (
          max(slo:sli_error:ratio_rate30m{sloth_id="cicd-pipeline-build-latency", sloth_service="cicd-pipeline", sloth_slo="build-latency"} > (6 * 0.05)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate6h{sloth_id="cicd-pipeline-build-latency", sloth_service="cicd-pipeline", sloth_slo="build-latency"} > (6 * 0.05)) without (sloth_window)
      )
    labels:
      severity: warning
      sloth_severity: page
    annotations:
      summary: '{{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget burn
        rate is over expected.'
      title: (page) {{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget
        burn rate is too fast.
  - alert: BuildLatency
    expr: |
      (
          max(slo:sli_error:ratio_rate2h{sloth_id="cicd-pipeline-build-latency", sloth_service="cicd-pipeline", sloth_slo="build-latency"} > (3 * 0.05)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate1d{sloth_id="cicd-pipeline-build-latency", sloth_service="cicd-pipeline", sloth_slo="build-latency"} > (3 * 0.05)) without (sloth_window)
      )
      or
      (
          max(slo:sli_error:ratio_rate6h{sloth_id="cicd-pipeline-build-latency", sloth_service="cicd-pipeline", sloth_slo="build-latency"} > (1 * 0.05)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate3d{sloth_id="cicd-pipeline-build-latency", sloth_service="cicd-pipeline", sloth_slo="build-latency"} > (1 * 0.05)) without (sloth_window)
      )
    labels:
      sloth_severity: ticket
    annotations:
      summary: '{{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget burn
        rate is over expected.'
      title: (ticket) {{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget
        burn rate is too fast.
- name: sloth-slo-sli-recordings-cicd-pipeline-test-availability
  rules:
  - record: slo:sli_error:ratio_rate5m
    expr: |-
      (sum(rate(cicd_test_status{status="0"}[5m]))
      /
      sum(rate(cicd_test_status[5m]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-test-availability
      sloth_service: cicd-pipeline
      sloth_slo: test-availability
      sloth_window: 5m
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate30m
    expr: |-
      (sum(rate(cicd_test_status{status="0"}[30m]))
      /
      sum(rate(cicd_test_status[30m]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-test-availability
      sloth_service: cicd-pipeline
      sloth_slo: test-availability
      sloth_window: 30m
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate1h
    expr: |-
      (sum(rate(cicd_test_status{status="0"}[1h]))
      /
      sum(rate(cicd_test_status[1h]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-test-availability
      sloth_service: cicd-pipeline
      sloth_slo: test-availability
      sloth_window: 1h
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate2h
    expr: |-
      (sum(rate(cicd_test_status{status="0"}[2h]))
      /
      sum(rate(cicd_test_status[2h]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-test-availability
      sloth_service: cicd-pipeline
      sloth_slo: test-availability
      sloth_window: 2h
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate6h
    expr: |-
      (sum(rate(cicd_test_status{status="0"}[6h]))
      /
      sum(rate(cicd_test_status[6h]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-test-availability
      sloth_service: cicd-pipeline
      sloth_slo: test-availability
      sloth_window: 6h
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate1d
    expr: |-
      (sum(rate(cicd_test_status{status="0"}[1d]))
      /
      sum(rate(cicd_test_status[1d]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-test-availability
      sloth_service: cicd-pipeline
      sloth_slo: test-availability
      sloth_window: 1d
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate3d
    expr: |-
      (sum(rate(cicd_test_status{status="0"}[3d]))
      /
      sum(rate(cicd_test_status[3d]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-test-availability
      sloth_service: cicd-pipeline
      sloth_slo: test-availability
      sloth_window: 3d
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate30d
    expr: |
      sum_over_time(slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-test-availability", sloth_service="cicd-pipeline", sloth_slo="test-availability"}[30d])
      / ignoring (sloth_window)
      count_over_time(slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-test-availability", sloth_service="cicd-pipeline", sloth_slo="test-availability"}[30d])
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-test-availability
      sloth_service: cicd-pipeline
      sloth_slo: test-availability
      sloth_window: 30d
      team: devops
      tier: platform
- name: sloth-slo-meta-recordings-cicd-pipeline-test-availability
  rules:
  - record: slo:objective:ratio
    expr: vector(0.99)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-test-availability
      sloth_service: cicd-pipeline
      sloth_slo: test-availability
      team: devops
      tier: platform
  - record: slo:error_budget:ratio
    expr: vector(1-0.99)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-test-availability
      sloth_service: cicd-pipeline
      sloth_slo: test-availability
      team: devops
      tier: platform
  - record: slo:time_period:days
    expr: vector(30)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-test-availability
      sloth_service: cicd-pipeline
      sloth_slo: test-availability
      team: devops
      tier: platform
  - record: slo:current_burn_rate:ratio
    expr: |
      slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-test-availability", sloth_service="cicd-pipeline", sloth_slo="test-availability"}
      / on(sloth_id, sloth_slo, sloth_service) group_left
      slo:error_budget:ratio{sloth_id="cicd-pipeline-test-availability", sloth_service="cicd-pipeline", sloth_slo="test-availability"}
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-test-availability
      sloth_service: cicd-pipeline
      sloth_slo: test-availability
      team: devops
      tier: platform
  - record: slo:period_burn_rate:ratio
    expr: |
      slo:sli_error:ratio_rate30d{sloth_id="cicd-pipeline-test-availability", sloth_service="cicd-pipeline", sloth_slo="test-availability"}
      / on(sloth_id, sloth_slo, sloth_service) group_left
      slo:error_budget:ratio{sloth_id="cicd-pipeline-test-availability", sloth_service="cicd-pipeline", sloth_slo="test-availability"}
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-test-availability
      sloth_service: cicd-pipeline
      sloth_slo: test-availability
      team: devops
      tier: platform
  - record: slo:period_error_budget_remaining:ratio
    expr: 1 - slo:period_burn_rate:ratio{sloth_id="cicd-pipeline-test-availability",
      sloth_service="cicd-pipeline", sloth_slo="test-availability"}
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-test-availability
      sloth_service: cicd-pipeline
      sloth_slo: test-availability
      team: devops
      tier: platform
  - record: sloth_slo_info
    expr: vector(1)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-test-availability
      sloth_mode: cli-gen-prom
      sloth_objective: "99"
      sloth_service: cicd-pipeline
      sloth_slo: test-availability
      sloth_spec: prometheus/v1
      sloth_version: v0.15.0
      team: devops
      tier: platform
- name: sloth-slo-alerts-cicd-pipeline-test-availability
  rules:
  - alert: TestAvailability
    expr: |
      (
          max(slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-test-availability", sloth_service="cicd-pipeline", sloth_slo="test-availability"} > (14.4 * 0.01)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate1h{sloth_id="cicd-pipeline-test-availability", sloth_service="cicd-pipeline", sloth_slo="test-availability"} > (14.4 * 0.01)) without (sloth_window)
      )
      or
      (
          max(slo:sli_error:ratio_rate30m{sloth_id="cicd-pipeline-test-availability", sloth_service="cicd-pipeline", sloth_slo="test-availability"} > (6 * 0.01)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate6h{sloth_id="cicd-pipeline-test-availability", sloth_service="cicd-pipeline", sloth_slo="test-availability"} > (6 * 0.01)) without (sloth_window)
      )
    labels:
      sloth_severity: page
    annotations:
      summary: '{{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget burn
        rate is over expected.'
      title: (page) {{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget
        burn rate is too fast.
  - alert: TestAvailability
    expr: |
      (
          max(slo:sli_error:ratio_rate2h{sloth_id="cicd-pipeline-test-availability", sloth_service="cicd-pipeline", sloth_slo="test-availability"} > (3 * 0.01)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate1d{sloth_id="cicd-pipeline-test-availability", sloth_service="cicd-pipeline", sloth_slo="test-availability"} > (3 * 0.01)) without (sloth_window)
      )
      or
      (
          max(slo:sli_error:ratio_rate6h{sloth_id="cicd-pipeline-test-availability", sloth_service="cicd-pipeline", sloth_slo="test-availability"} > (1 * 0.01)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate3d{sloth_id="cicd-pipeline-test-availability", sloth_service="cicd-pipeline", sloth_slo="test-availability"} > (1 * 0.01)) without (sloth_window)
      )
    labels:
      severity: warning
      sloth_severity: ticket
    annotations:
      summary: '{{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget burn
        rate is over expected.'
      title: (ticket) {{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget
        burn rate is too fast.
- name: sloth-slo-sli-recordings-cicd-pipeline-security-scan-availability
  rules:
  - record: slo:sli_error:ratio_rate5m
    expr: |-
      (sum(rate(cicd_security_scan_status{status="0"}[5m]))
      /
      sum(rate(cicd_security_scan_status[5m]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-security-scan-availability
      sloth_service: cicd-pipeline
      sloth_slo: security-scan-availability
      sloth_window: 5m
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate30m
    expr: |-
      (sum(rate(cicd_security_scan_status{status="0"}[30m]))
      /
      sum(rate(cicd_security_scan_status[30m]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-security-scan-availability
      sloth_service: cicd-pipeline
      sloth_slo: security-scan-availability
      sloth_window: 30m
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate1h
    expr: |-
      (sum(rate(cicd_security_scan_status{status="0"}[1h]))
      /
      sum(rate(cicd_security_scan_status[1h]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-security-scan-availability
      sloth_service: cicd-pipeline
      sloth_slo: security-scan-availability
      sloth_window: 1h
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate2h
    expr: |-
      (sum(rate(cicd_security_scan_status{status="0"}[2h]))
      /
      sum(rate(cicd_security_scan_status[2h]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-security-scan-availability
      sloth_service: cicd-pipeline
      sloth_slo: security-scan-availability
      sloth_window: 2h
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate6h
    expr: |-
      (sum(rate(cicd_security_scan_status{status="0"}[6h]))
      /
      sum(rate(cicd_security_scan_status[6h]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-security-scan-availability
      sloth_service: cicd-pipeline
      sloth_slo: security-scan-availability
      sloth_window: 6h
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate1d
    expr: |-
      (sum(rate(cicd_security_scan_status{status="0"}[1d]))
      /
      sum(rate(cicd_security_scan_status[1d]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-security-scan-availability
      sloth_service: cicd-pipeline
      sloth_slo: security-scan-availability
      sloth_window: 1d
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate3d
    expr: |-
      (sum(rate(cicd_security_scan_status{status="0"}[3d]))
      /
      sum(rate(cicd_security_scan_status[3d]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-security-scan-availability
      sloth_service: cicd-pipeline
      sloth_slo: security-scan-availability
      sloth_window: 3d
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate30d
    expr: |
      sum_over_time(slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-security-scan-availability", sloth_service="cicd-pipeline", sloth_slo="security-scan-availability"}[30d])
      / ignoring (sloth_window)
      count_over_time(slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-security-scan-availability", sloth_service="cicd-pipeline", sloth_slo="security-scan-availability"}[30d])
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-security-scan-availability
      sloth_service: cicd-pipeline
      sloth_slo: security-scan-availability
      sloth_window: 30d
      team: devops
      tier: platform
- name: sloth-slo-meta-recordings-cicd-pipeline-security-scan-availability
  rules:
  - record: slo:objective:ratio
    expr: vector(0.9990000000000001)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-security-scan-availability
      sloth_service: cicd-pipeline
      sloth_slo: security-scan-availability
      team: devops
      tier: platform
  - record: slo:error_budget:ratio
    expr: vector(1-0.9990000000000001)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-security-scan-availability
      sloth_service: cicd-pipeline
      sloth_slo: security-scan-availability
      team: devops
      tier: platform
  - record: slo:time_period:days
    expr: vector(30)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-security-scan-availability
      sloth_service: cicd-pipeline
      sloth_slo: security-scan-availability
      team: devops
      tier: platform
  - record: slo:current_burn_rate:ratio
    expr: |
      slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-security-scan-availability", sloth_service="cicd-pipeline", sloth_slo="security-scan-availability"}
      / on(sloth_id, sloth_slo, sloth_service) group_left
      slo:error_budget:ratio{sloth_id="cicd-pipeline-security-scan-availability", sloth_service="cicd-pipeline", sloth_slo="security-scan-availability"}
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-security-scan-availability
      sloth_service: cicd-pipeline
      sloth_slo: security-scan-availability
      team: devops
      tier: platform
  - record: slo:period_burn_rate:ratio
    expr: |
      slo:sli_error:ratio_rate30d{sloth_id="cicd-pipeline-security-scan-availability", sloth_service="cicd-pipeline", sloth_slo="security-scan-availability"}
      / on(sloth_id, sloth_slo, sloth_service) group_left
      slo:error_budget:ratio{sloth_id="cicd-pipeline-security-scan-availability", sloth_service="cicd-pipeline", sloth_slo="security-scan-availability"}
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-security-scan-availability
      sloth_service: cicd-pipeline
      sloth_slo: security-scan-availability
      team: devops
      tier: platform
  - record: slo:period_error_budget_remaining:ratio
    expr: 1 - slo:period_burn_rate:ratio{sloth_id="cicd-pipeline-security-scan-availability",
      sloth_service="cicd-pipeline", sloth_slo="security-scan-availability"}
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-security-scan-availability
      sloth_service: cicd-pipeline
      sloth_slo: security-scan-availability
      team: devops
      tier: platform
  - record: sloth_slo_info
    expr: vector(1)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-security-scan-availability
      sloth_mode: cli-gen-prom
      sloth_objective: "99.9"
      sloth_service: cicd-pipeline
      sloth_slo: security-scan-availability
      sloth_spec: prometheus/v1
      sloth_version: v0.15.0
      team: devops
      tier: platform
- name: sloth-slo-alerts-cicd-pipeline-security-scan-availability
  rules:
  - alert: SecurityScanAvailability
    expr: |
      (
          max(slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-security-scan-availability", sloth_service="cicd-pipeline", sloth_slo="security-scan-availability"} > (14.4 * 0.0009999999999999432)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate1h{sloth_id="cicd-pipeline-security-scan-availability", sloth_service="cicd-pipeline", sloth_slo="security-scan-availability"} > (14.4 * 0.0009999999999999432)) without (sloth_window)
      )
      or
      (
          max(slo:sli_error:ratio_rate30m{sloth_id="cicd-pipeline-security-scan-availability", sloth_service="cicd-pipeline", sloth_slo="security-scan-availability"} > (6 * 0.0009999999999999432)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate6h{sloth_id="cicd-pipeline-security-scan-availability", sloth_service="cicd-pipeline", sloth_slo="security-scan-availability"} > (6 * 0.0009999999999999432)) without (sloth_window)
      )
    labels:
      severity: critical
      sloth_severity: page
    annotations:
      summary: '{{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget burn
        rate is over expected.'
      title: (page) {{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget
        burn rate is too fast.
  - alert: SecurityScanAvailability
    expr: |
      (
          max(slo:sli_error:ratio_rate2h{sloth_id="cicd-pipeline-security-scan-availability", sloth_service="cicd-pipeline", sloth_slo="security-scan-availability"} > (3 * 0.0009999999999999432)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate1d{sloth_id="cicd-pipeline-security-scan-availability", sloth_service="cicd-pipeline", sloth_slo="security-scan-availability"} > (3 * 0.0009999999999999432)) without (sloth_window)
      )
      or
      (
          max(slo:sli_error:ratio_rate6h{sloth_id="cicd-pipeline-security-scan-availability", sloth_service="cicd-pipeline", sloth_slo="security-scan-availability"} > (1 * 0.0009999999999999432)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate3d{sloth_id="cicd-pipeline-security-scan-availability", sloth_service="cicd-pipeline", sloth_slo="security-scan-availability"} > (1 * 0.0009999999999999432)) without (sloth_window)
      )
    labels:
      sloth_severity: ticket
    annotations:
      summary: '{{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget burn
        rate is over expected.'
      title: (ticket) {{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget
        burn rate is too fast.
- name: sloth-slo-sli-recordings-cicd-pipeline-critical-vulnerabilities
  rules:
  - record: slo:sli_error:ratio_rate5m
    expr: |-
      (sum(rate(cicd_vulnerabilities_total{severity="critical"}[5m]))
      /
      sum(rate(cicd_build_status[5m]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-critical-vulnerabilities
      sloth_service: cicd-pipeline
      sloth_slo: critical-vulnerabilities
      sloth_window: 5m
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate30m
    expr: |-
      (sum(rate(cicd_vulnerabilities_total{severity="critical"}[30m]))
      /
      sum(rate(cicd_build_status[30m]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-critical-vulnerabilities
      sloth_service: cicd-pipeline
      sloth_slo: critical-vulnerabilities
      sloth_window: 30m
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate1h
    expr: |-
      (sum(rate(cicd_vulnerabilities_total{severity="critical"}[1h]))
      /
      sum(rate(cicd_build_status[1h]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-critical-vulnerabilities
      sloth_service: cicd-pipeline
      sloth_slo: critical-vulnerabilities
      sloth_window: 1h
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate2h
    expr: |-
      (sum(rate(cicd_vulnerabilities_total{severity="critical"}[2h]))
      /
      sum(rate(cicd_build_status[2h]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-critical-vulnerabilities
      sloth_service: cicd-pipeline
      sloth_slo: critical-vulnerabilities
      sloth_window: 2h
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate6h
    expr: |-
      (sum(rate(cicd_vulnerabilities_total{severity="critical"}[6h]))
      /
      sum(rate(cicd_build_status[6h]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-critical-vulnerabilities
      sloth_service: cicd-pipeline
      sloth_slo: critical-vulnerabilities
      sloth_window: 6h
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate1d
    expr: |-
      (sum(rate(cicd_vulnerabilities_total{severity="critical"}[1d]))
      /
      sum(rate(cicd_build_status[1d]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-critical-vulnerabilities
      sloth_service: cicd-pipeline
      sloth_slo: critical-vulnerabilities
      sloth_window: 1d
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate3d
    expr: |-
      (sum(rate(cicd_vulnerabilities_total{severity="critical"}[3d]))
      /
      sum(rate(cicd_build_status[3d]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-critical-vulnerabilities
      sloth_service: cicd-pipeline
      sloth_slo: critical-vulnerabilities
      sloth_window: 3d
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate30d
    expr: |
      sum_over_time(slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-critical-vulnerabilities", sloth_service="cicd-pipeline", sloth_slo="critical-vulnerabilities"}[30d])
      / ignoring (sloth_window)
      count_over_time(slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-critical-vulnerabilities", sloth_service="cicd-pipeline", sloth_slo="critical-vulnerabilities"}[30d])
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-critical-vulnerabilities
      sloth_service: cicd-pipeline
      sloth_slo: critical-vulnerabilities
      sloth_window: 30d
      team: devops
      tier: platform
- name: sloth-slo-meta-recordings-cicd-pipeline-critical-vulnerabilities
  rules:
  - record: slo:objective:ratio
    expr: vector(1)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-critical-vulnerabilities
      sloth_service: cicd-pipeline
      sloth_slo: critical-vulnerabilities
      team: devops
      tier: platform
  - record: slo:error_budget:ratio
    expr: vector(1-1)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-critical-vulnerabilities
      sloth_service: cicd-pipeline
      sloth_slo: critical-vulnerabilities
      team: devops
      tier: platform
  - record: slo:time_period:days
    expr: vector(30)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-critical-vulnerabilities
      sloth_service: cicd-pipeline
      sloth_slo: critical-vulnerabilities
      team: devops
      tier: platform
  - record: slo:current_burn_rate:ratio
    expr: |
      slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-critical-vulnerabilities", sloth_service="cicd-pipeline", sloth_slo="critical-vulnerabilities"}
      / on(sloth_id, sloth_slo, sloth_service) group_left
      slo:error_budget:ratio{sloth_id="cicd-pipeline-critical-vulnerabilities", sloth_service="cicd-pipeline", sloth_slo="critical-vulnerabilities"}
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-critical-vulnerabilities
      sloth_service: cicd-pipeline
      sloth_slo: critical-vulnerabilities
      team: devops
      tier: platform
  - record: slo:period_burn_rate:ratio
    expr: |
      slo:sli_error:ratio_rate30d{sloth_id="cicd-pipeline-critical-vulnerabilities", sloth_service="cicd-pipeline", sloth_slo="critical-vulnerabilities"}
      / on(sloth_id, sloth_slo, sloth_service) group_left
      slo:error_budget:ratio{sloth_id="cicd-pipeline-critical-vulnerabilities", sloth_service="cicd-pipeline", sloth_slo="critical-vulnerabilities"}
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-critical-vulnerabilities
      sloth_service: cicd-pipeline
      sloth_slo: critical-vulnerabilities
      team: devops
      tier: platform
  - record: slo:period_error_budget_remaining:ratio
    expr: 1 - slo:period_burn_rate:ratio{sloth_id="cicd-pipeline-critical-vulnerabilities",
      sloth_service="cicd-pipeline", sloth_slo="critical-vulnerabilities"}
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-critical-vulnerabilities
      sloth_service: cicd-pipeline
      sloth_slo: critical-vulnerabilities
      team: devops
      tier: platform
  - record: sloth_slo_info
    expr: vector(1)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-critical-vulnerabilities
      sloth_mode: cli-gen-prom
      sloth_objective: "100"
      sloth_service: cicd-pipeline
      sloth_slo: critical-vulnerabilities
      sloth_spec: prometheus/v1
      sloth_version: v0.15.0
      team: devops
      tier: platform
- name: sloth-slo-alerts-cicd-pipeline-critical-vulnerabilities
  rules:
  - alert: CriticalVulnerabilities
    expr: |
      (
          max(slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-critical-vulnerabilities", sloth_service="cicd-pipeline", sloth_slo="critical-vulnerabilities"} > (14.4 * 0)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate1h{sloth_id="cicd-pipeline-critical-vulnerabilities", sloth_service="cicd-pipeline", sloth_slo="critical-vulnerabilities"} > (14.4 * 0)) without (sloth_window)
      )
      or
      (
          max(slo:sli_error:ratio_rate30m{sloth_id="cicd-pipeline-critical-vulnerabilities", sloth_service="cicd-pipeline", sloth_slo="critical-vulnerabilities"} > (6 * 0)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate6h{sloth_id="cicd-pipeline-critical-vulnerabilities", sloth_service="cicd-pipeline", sloth_slo="critical-vulnerabilities"} > (6 * 0)) without (sloth_window)
      )
    labels:
      severity: critical
      sloth_severity: page
    annotations:
      summary: '{{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget burn
        rate is over expected.'
      title: (page) {{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget
        burn rate is too fast.
  - alert: CriticalVulnerabilities
    expr: |
      (
          max(slo:sli_error:ratio_rate2h{sloth_id="cicd-pipeline-critical-vulnerabilities", sloth_service="cicd-pipeline", sloth_slo="critical-vulnerabilities"} > (3 * 0)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate1d{sloth_id="cicd-pipeline-critical-vulnerabilities", sloth_service="cicd-pipeline", sloth_slo="critical-vulnerabilities"} > (3 * 0)) without (sloth_window)
      )
      or
      (
          max(slo:sli_error:ratio_rate6h{sloth_id="cicd-pipeline-critical-vulnerabilities", sloth_service="cicd-pipeline", sloth_slo="critical-vulnerabilities"} > (1 * 0)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate3d{sloth_id="cicd-pipeline-critical-vulnerabilities", sloth_service="cicd-pipeline", sloth_slo="critical-vulnerabilities"} > (1 * 0)) without (sloth_window)
      )
    labels:
      sloth_severity: ticket
    annotations:
      summary: '{{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget burn
        rate is over expected.'
      title: (ticket) {{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget
        burn rate is too fast.
- name: sloth-slo-sli-recordings-cicd-pipeline-rollback-rate
  rules:
  - record: slo:sli_error:ratio_rate5m
    expr: |-
      (sum(rate(cicd_rollback_total[5m]))
      /
      sum(rate(cicd_deployment_status[5m]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-rollback-rate
      sloth_service: cicd-pipeline
      sloth_slo: rollback-rate
      sloth_window: 5m
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate30m
    expr: |-
      (sum(rate(cicd_rollback_total[30m]))
      /
      sum(rate(cicd_deployment_status[30m]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-rollback-rate
      sloth_service: cicd-pipeline
      sloth_slo: rollback-rate
      sloth_window: 30m
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate1h
    expr: |-
      (sum(rate(cicd_rollback_total[1h]))
      /
      sum(rate(cicd_deployment_status[1h]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-rollback-rate
      sloth_service: cicd-pipeline
      sloth_slo: rollback-rate
      sloth_window: 1h
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate2h
    expr: |-
      (sum(rate(cicd_rollback_total[2h]))
      /
      sum(rate(cicd_deployment_status[2h]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-rollback-rate
      sloth_service: cicd-pipeline
      sloth_slo: rollback-rate
      sloth_window: 2h
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate6h
    expr: |-
      (sum(rate(cicd_rollback_total[6h]))
      /
      sum(rate(cicd_deployment_status[6h]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-rollback-rate
      sloth_service: cicd-pipeline
      sloth_slo: rollback-rate
      sloth_window: 6h
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate1d
    expr: |-
      (sum(rate(cicd_rollback_total[1d]))
      /
      sum(rate(cicd_deployment_status[1d]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-rollback-rate
      sloth_service: cicd-pipeline
      sloth_slo: rollback-rate
      sloth_window: 1d
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate3d
    expr: |-
      (sum(rate(cicd_rollback_total[3d]))
      /
      sum(rate(cicd_deployment_status[3d]))
      )
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-rollback-rate
      sloth_service: cicd-pipeline
      sloth_slo: rollback-rate
      sloth_window: 3d
      team: devops
      tier: platform
  - record: slo:sli_error:ratio_rate30d
    expr: |
      sum_over_time(slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-rollback-rate", sloth_service="cicd-pipeline", sloth_slo="rollback-rate"}[30d])
      / ignoring (sloth_window)
      count_over_time(slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-rollback-rate", sloth_service="cicd-pipeline", sloth_slo="rollback-rate"}[30d])
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-rollback-rate
      sloth_service: cicd-pipeline
      sloth_slo: rollback-rate
      sloth_window: 30d
      team: devops
      tier: platform
- name: sloth-slo-meta-recordings-cicd-pipeline-rollback-rate
  rules:
  - record: slo:objective:ratio
    expr: vector(0.98)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-rollback-rate
      sloth_service: cicd-pipeline
      sloth_slo: rollback-rate
      team: devops
      tier: platform
  - record: slo:error_budget:ratio
    expr: vector(1-0.98)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-rollback-rate
      sloth_service: cicd-pipeline
      sloth_slo: rollback-rate
      team: devops
      tier: platform
  - record: slo:time_period:days
    expr: vector(30)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-rollback-rate
      sloth_service: cicd-pipeline
      sloth_slo: rollback-rate
      team: devops
      tier: platform
  - record: slo:current_burn_rate:ratio
    expr: |
      slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-rollback-rate", sloth_service="cicd-pipeline", sloth_slo="rollback-rate"}
      / on(sloth_id, sloth_slo, sloth_service) group_left
      slo:error_budget:ratio{sloth_id="cicd-pipeline-rollback-rate", sloth_service="cicd-pipeline", sloth_slo="rollback-rate"}
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-rollback-rate
      sloth_service: cicd-pipeline
      sloth_slo: rollback-rate
      team: devops
      tier: platform
  - record: slo:period_burn_rate:ratio
    expr: |
      slo:sli_error:ratio_rate30d{sloth_id="cicd-pipeline-rollback-rate", sloth_service="cicd-pipeline", sloth_slo="rollback-rate"}
      / on(sloth_id, sloth_slo, sloth_service) group_left
      slo:error_budget:ratio{sloth_id="cicd-pipeline-rollback-rate", sloth_service="cicd-pipeline", sloth_slo="rollback-rate"}
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-rollback-rate
      sloth_service: cicd-pipeline
      sloth_slo: rollback-rate
      team: devops
      tier: platform
  - record: slo:period_error_budget_remaining:ratio
    expr: 1 - slo:period_burn_rate:ratio{sloth_id="cicd-pipeline-rollback-rate", sloth_service="cicd-pipeline",
      sloth_slo="rollback-rate"}
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-rollback-rate
      sloth_service: cicd-pipeline
      sloth_slo: rollback-rate
      team: devops
      tier: platform
  - record: sloth_slo_info
    expr: vector(1)
    labels:
      owner: sre-team
      sloth_id: cicd-pipeline-rollback-rate
      sloth_mode: cli-gen-prom
      sloth_objective: "98"
      sloth_service: cicd-pipeline
      sloth_slo: rollback-rate
      sloth_spec: prometheus/v1
      sloth_version: v0.15.0
      team: devops
      tier: platform
- name: sloth-slo-alerts-cicd-pipeline-rollback-rate
  rules:
  - alert: RollbackRate
    expr: |
      (
          max(slo:sli_error:ratio_rate5m{sloth_id="cicd-pipeline-rollback-rate", sloth_service="cicd-pipeline", sloth_slo="rollback-rate"} > (14.4 * 0.02)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate1h{sloth_id="cicd-pipeline-rollback-rate", sloth_service="cicd-pipeline", sloth_slo="rollback-rate"} > (14.4 * 0.02)) without (sloth_window)
      )
      or
      (
          max(slo:sli_error:ratio_rate30m{sloth_id="cicd-pipeline-rollback-rate", sloth_service="cicd-pipeline", sloth_slo="rollback-rate"} > (6 * 0.02)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate6h{sloth_id="cicd-pipeline-rollback-rate", sloth_service="cicd-pipeline", sloth_slo="rollback-rate"} > (6 * 0.02)) without (sloth_window)
      )
    labels:
      sloth_severity: page
    annotations:
      summary: '{{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget burn
        rate is over expected.'
      title: (page) {{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget
        burn rate is too fast.
  - alert: RollbackRate
    expr: |
      (
          max(slo:sli_error:ratio_rate2h{sloth_id="cicd-pipeline-rollback-rate", sloth_service="cicd-pipeline", sloth_slo="rollback-rate"} > (3 * 0.02)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate1d{sloth_id="cicd-pipeline-rollback-rate", sloth_service="cicd-pipeline", sloth_slo="rollback-rate"} > (3 * 0.02)) without (sloth_window)
      )
      or
      (
          max(slo:sli_error:ratio_rate6h{sloth_id="cicd-pipeline-rollback-rate", sloth_service="cicd-pipeline", sloth_slo="rollback-rate"} > (1 * 0.02)) without (sloth_window)
          and
          max(slo:sli_error:ratio_rate3d{sloth_id="cicd-pipeline-rollback-rate", sloth_service="cicd-pipeline", sloth_slo="rollback-rate"} > (1 * 0.02)) without (sloth_window)
      )
    labels:
      severity: warning
      sloth_severity: ticket
    annotations:
      summary: '{{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget burn
        rate is over expected.'
      title: (ticket) {{$labels.sloth_service}} {{$labels.sloth_slo}} SLO error budget
        burn rate is too fast.
